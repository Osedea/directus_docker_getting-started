{"version":3,"sources":["webpack:///./src/interfaces/file-size/format-size.js","webpack:///./src/interfaces/file/input.vue?7f2b","webpack:///./node_modules/@directus/extension-toolkit/mixins/interface.js","webpack:///./src/interfaces/file/input.vue?f915","webpack:///src/interfaces/file/input.vue","webpack:///./src/interfaces/file/input.vue?e7b9","webpack:///./src/interfaces/file/input.vue","webpack:///./src/interfaces/file/get-icon.js"],"names":["formatSize","bytes","decimal","threshold","Boolean","Math","abs","units","unitIndex","remainingBytes","length","toFixed","module","exports","props","id","type","String","required","name","value","default","Number","readonly","collection","options","Object","newItem","relation","fields","values","render","_vm","this","_h","$createElement","_c","_self","staticClass","attrs","image","title","subtitle","subtitleExtra","src","icon","href","deselect","text","$t","remove","on","$event","$emit","removeFile","accept","saveUpload","newFile","_v","_s","existing","done","_e","onSearchInput","viewType","filters","viewQuery","viewOptions","setViewOptions","setViewQuery","saveSelection","staticRenderFns","mixins","data","viewOptionsOverride","viewTypeOverride","viewQueryOverride","filtersOverride","_","cloneDeep","computed","startsWith","fileTypeFilters","methods","fileInfo","q","file","component","getIcon"],"mappings":"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","file":"js/chunk-4bd08b17.810a787c.js","sourcesContent":["/**\n * Convert a value in bytes to a human readable format\n * @param {number} value The value in bytes to format\n * @return {string} The human readable filesize\n * @example\n *\n * const byteSize = 1500;\n * const fileSize = formatSize(byteSize);\n * // => '1.5 KB'\n * @see https://stackoverflow.com/a/14919494/4859211\n */\nexport default function formatSize(bytes = 0, decimal = true) {\n  const threshold = decimal ? 1000 : 1024;\n\n  if (Boolean(bytes) === false) {\n    return \"--\";\n  }\n\n  if (Math.abs(bytes) < threshold) {\n    return `${bytes} B`;\n  }\n\n  const units = decimal\n    ? [\"kB\", \"MB\", \"GB\", \"TB\", \"PB\", \"EB\", \"ZB\", \"YB\"]\n    : [\"KiB\", \"MiB\", \"GiB\", \"TiB\", \"PiB\", \"EiB\", \"ZiB\", \"YiB\"];\n\n  let unitIndex = -1;\n  let remainingBytes = bytes;\n\n  do {\n    remainingBytes /= threshold;\n    unitIndex += 1;\n  } while (Math.abs(remainingBytes) >= threshold && unitIndex < units.length - 1);\n\n  return `${remainingBytes.toFixed(1)} ${units[unitIndex]}`;\n}\n","import mod from \"-!../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../../node_modules/css-loader/dist/cjs.js??ref--8-oneOf-1-1!../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-2!../../../node_modules/sass-loader/dist/cjs.js??ref--8-oneOf-1-3!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./input.vue?vue&type=style&index=0&id=c551370e&lang=scss&scoped=true&\"; export default mod; export * from \"-!../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../../node_modules/css-loader/dist/cjs.js??ref--8-oneOf-1-1!../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-2!../../../node_modules/sass-loader/dist/cjs.js??ref--8-oneOf-1-3!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./input.vue?vue&type=style&index=0&id=c551370e&lang=scss&scoped=true&\"","module.exports = {\n  props: {\n    // Unique id for this interface. Should be added to the lower level \n    // HTML input element if applicable. This ID will be used in the label's\n    // `for` attribute\n    id: {\n      type: String,\n      required: true\n    },\n    // Name of the field\n    name: {\n      type: String,\n      required: true\n    },\n    // The current value. This can either be the default value, the saved database\n    // value or the current state after the user made an edit\n    value: {\n      type: null,\n      default: null\n    },\n    // Type of the field, eg `string`, `hash`, or `array`\n    type: {\n      type: String,\n      required: true\n    },\n    // Max length\n    length: {\n      type: [String, Number],\n      default: null\n    },\n    // If the field is readonly or not\n    readonly: {\n      type: Boolean,\n      default: false\n    },\n    // Name of the collection\n    collection: {\n      type: String,\n      default: null\n    },\n    // If the field is required or not\n    required: {\n      type: Boolean,\n      default: false\n    },\n    // Field options. A json object based on the interface's meta.json file\n    options: {\n      type: Object,\n      default: () => ({})\n    },\n    // If the item that's currently being edited is new\n    newItem: {\n      type: Boolean,\n      default: false\n    },\n    // The relation of the current field. Will contain information on the related\n    // collection and field(s)\n    relation: {\n      type: Object,\n      default: null\n    },\n    // The other fields in the current edit page\n    fields: {\n      type: Object,\n      default: null\n    },\n    // The values of the other fields on the edit page. Can be used for things like\n    // automatically generating a slug based on another field\n    values: {\n      type: Object,\n      default: null\n    }\n  }\n};\n","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"input-single-file\"},[(_vm.value)?_c('v-card',{staticClass:\"card\",attrs:{\"title\":_vm.image.title,\"subtitle\":_vm.subtitle + _vm.subtitleExtra,\"src\":_vm.src,\"icon\":_vm.icon,\"href\":_vm.href,\"options\":{\n      deselect: {\n        text: _vm.$t('deselect'),\n        icon: 'clear'\n      },\n      remove: {\n        text: _vm.$t('delete'),\n        icon: 'delete'\n      }\n    },\"big-image\":\"\"},on:{\"deselect\":function($event){return _vm.$emit('input', null)},\"remove\":_vm.removeFile}}):_c('v-upload',{staticClass:\"uploader\",attrs:{\"small\":\"\",\"disabled\":_vm.readonly,\"accept\":_vm.options.accept,\"multiple\":false},on:{\"upload\":_vm.saveUpload}}),_c('v-button',{attrs:{\"type\":\"button\",\"disabled\":_vm.readonly},on:{\"click\":function($event){_vm.newFile = true}}},[_c('v-icon',{attrs:{\"name\":\"add\"}}),_vm._v(\"\\n    \"+_vm._s(_vm.$t(\"new_file\"))+\"\\n  \")],1),_c('v-button',{attrs:{\"type\":\"button\",\"disabled\":_vm.readonly},on:{\"click\":function($event){_vm.existing = true}}},[_c('v-icon',{attrs:{\"name\":\"playlist_add\"}}),_vm._v(\"\\n    \"+_vm._s(_vm.$t(\"existing\"))+\"\\n  \")],1),(_vm.newFile)?_c('portal',{attrs:{\"to\":\"modal\"}},[_c('v-modal',{attrs:{\"title\":_vm.$t('file_upload'),\"buttons\":{\n        done: {\n          text: _vm.$t('done')\n        }\n      }},on:{\"close\":function($event){_vm.newFile = false}}},[_c('div',{staticClass:\"body\"},[_c('v-upload',{attrs:{\"accept\":_vm.options.accept,\"multiple\":false},on:{\"upload\":_vm.saveUpload}})],1)])],1):_vm._e(),(_vm.existing)?_c('portal',{attrs:{\"to\":\"modal\"}},[_c('v-modal',{attrs:{\"title\":_vm.$t('choose_one'),\"buttons\":{\n        done: {\n          text: _vm.$t('done')\n        }\n      },\"action-required\":\"\"},on:{\"close\":function($event){_vm.existing = false},\"done\":function($event){_vm.existing = false}}},[_c('div',{staticClass:\"content\"},[_c('div',{staticClass:\"search\"},[_c('v-input',{staticClass:\"search-input\",attrs:{\"type\":\"search\",\"placeholder\":_vm.$t('search')},on:{\"input\":_vm.onSearchInput}})],1),_c('v-items',{staticClass:\"items\",attrs:{\"collection\":\"directus_files\",\"view-type\":_vm.viewType,\"selection\":_vm.value ? [_vm.value] : [],\"filters\":_vm.filters,\"view-query\":_vm.viewQuery,\"view-options\":_vm.viewOptions},on:{\"options\":_vm.setViewOptions,\"query\":_vm.setViewQuery,\"select\":_vm.saveSelection}})],1)])],1):_vm._e()],1)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\n  <div class=\"input-single-file\">\n    <v-card\n      v-if=\"value\"\n      class=\"card\"\n      :title=\"image.title\"\n      :subtitle=\"subtitle + subtitleExtra\"\n      :src=\"src\"\n      :icon=\"icon\"\n      :href=\"href\"\n      :options=\"{\n        deselect: {\n          text: $t('deselect'),\n          icon: 'clear'\n        },\n        remove: {\n          text: $t('delete'),\n          icon: 'delete'\n        }\n      }\"\n      big-image\n      @deselect=\"$emit('input', null)\"\n      @remove=\"removeFile\"\n    ></v-card>\n    <v-upload\n      v-else\n      small\n      :disabled=\"readonly\"\n      class=\"uploader\"\n      :accept=\"options.accept\"\n      :multiple=\"false\"\n      @upload=\"saveUpload\"\n    ></v-upload>\n\n    <v-button type=\"button\" :disabled=\"readonly\" @click=\"newFile = true\">\n      <v-icon name=\"add\" />\n      {{ $t(\"new_file\") }}\n    </v-button>\n    <!--\n    -->\n    <v-button type=\"button\" :disabled=\"readonly\" @click=\"existing = true\">\n      <v-icon name=\"playlist_add\" />\n      {{ $t(\"existing\") }}\n    </v-button>\n\n    <portal v-if=\"newFile\" to=\"modal\">\n      <v-modal\n        :title=\"$t('file_upload')\"\n        :buttons=\"{\n          done: {\n            text: $t('done')\n          }\n        }\"\n        @close=\"newFile = false\"\n      >\n        <div class=\"body\">\n          <v-upload :accept=\"options.accept\" :multiple=\"false\" @upload=\"saveUpload\"></v-upload>\n        </div>\n      </v-modal>\n    </portal>\n\n    <portal v-if=\"existing\" to=\"modal\">\n      <v-modal\n        :title=\"$t('choose_one')\"\n        :buttons=\"{\n          done: {\n            text: $t('done')\n          }\n        }\"\n        action-required\n        @close=\"existing = false\"\n        @done=\"existing = false\"\n      >\n        <div class=\"content\">\n          <div class=\"search\">\n            <v-input\n              type=\"search\"\n              :placeholder=\"$t('search')\"\n              class=\"search-input\"\n              @input=\"onSearchInput\"\n            />\n          </div>\n          <v-items\n            class=\"items\"\n            collection=\"directus_files\"\n            :view-type=\"viewType\"\n            :selection=\"value ? [value] : []\"\n            :filters=\"filters\"\n            :view-query=\"viewQuery\"\n            :view-options=\"viewOptions\"\n            @options=\"setViewOptions\"\n            @query=\"setViewQuery\"\n            @select=\"saveSelection\"\n          ></v-items>\n        </div>\n      </v-modal>\n    </portal>\n  </div>\n</template>\n\n<script>\nimport mixin from \"@directus/extension-toolkit/mixins/interface\";\nimport formatSize from \"../file-size/format-size\";\nimport getIcon from \"./get-icon\";\n\nexport default {\n  mixins: [mixin],\n  data() {\n    return {\n      newFile: false,\n      existing: false,\n      viewOptionsOverride: {},\n      viewTypeOverride: null,\n      viewQueryOverride: {},\n      filtersOverride: [],\n      image: _.cloneDeep(this.value)\n    };\n  },\n  computed: {\n    subtitle() {\n      if (!this.image) return \"\";\n\n      return (\n        this.image.filename.split(\".\").pop() +\n        \" • \" +\n        this.$d(new Date(this.image.uploaded_on), \"short\")\n      );\n    },\n    subtitleExtra() {\n      // Image ? -> display dimensions and formatted filesize\n      return this.image.type && this.image.type.startsWith(\"image\")\n        ? \" • \" +\n            this.image.width +\n            \" x \" +\n            this.image.height +\n            \" (\" +\n            formatSize(this.image.filesize) +\n            \")\"\n        : null;\n    },\n    src() {\n      return this.image.type && this.image.type.startsWith(\"image\")\n        ? this.image.data.full_url\n        : null;\n    },\n    icon() {\n      return this.image.type && !this.image.type.startsWith(\"image\")\n        ? getIcon(this.image.type)\n        : null;\n    },\n    href() {\n      return this.image.type && this.image.type === \"application/pdf\"\n        ? this.image.data.full_url\n        : null;\n    },\n    viewOptions() {\n      const viewOptions = this.options.viewOptions;\n      return {\n        ...viewOptions,\n        ...this.viewOptionsOverride\n      };\n    },\n    viewType() {\n      if (this.viewTypeOverride) return this.viewTypeOverride;\n      return this.options.viewType;\n    },\n    viewQuery() {\n      const viewQuery = this.options.viewQuery;\n      return {\n        ...viewQuery,\n        ...this.viewQueryOverride\n      };\n    },\n    filters() {\n      return [...this.options.filters, ...this.fileTypeFilters, ...this.filtersOverride];\n    },\n    fileTypeFilters() {\n      if (\n        !this.options.accept ||\n        this.filtersOverride.length > 0 ||\n        this.options.filters.some(filter => filter.field === \"type\")\n      ) {\n        return [];\n      }\n\n      return [\n        {\n          field: \"type\",\n          operator: \"in\",\n          value: (this.options.accept || \"\").trim().split(/,\\s*/)\n        }\n      ];\n    }\n  },\n  async created() {\n    if (this.value && this.value.id) {\n      try {\n        let fileData = await this.$api.getItem(\"directus_files\", this.value.id);\n        this.image = fileData.data;\n      } catch (e) {}\n    }\n    this.onSearchInput = _.debounce(this.onSearchInput, 200);\n  },\n  methods: {\n    saveUpload(fileInfo) {\n      this.image = fileInfo.data;\n      // We know that the primary key of directus_files is called `id`\n      this.$emit(\"input\", { id: fileInfo.data.id });\n\n      this.newFile = false;\n    },\n    setViewOptions(updates) {\n      this.viewOptionsOverride = {\n        ...this.viewOptionsOverride,\n        ...updates\n      };\n    },\n    setViewQuery(updates) {\n      this.viewQueryOverride = {\n        ...this.viewQueryOverride,\n        ...updates\n      };\n    },\n    onSearchInput(value) {\n      this.setViewQuery({\n        q: value\n      });\n    },\n    saveSelection(value) {\n      const file = value[value.length - 1];\n      this.image = file;\n      this.$emit(\"input\", { id: file.id });\n    },\n    async removeFile() {\n      const file = this.value;\n      await this.$api.deleteItem(\"directus_files\", file.id);\n      this.$notify({\n        title: this.$t(\"item_deleted\"),\n        color: \"green\",\n        iconMain: \"check\"\n      });\n      this.image = null;\n      this.$emit(\"input\", null);\n    }\n  }\n};\n</script>\n\n<style lang=\"scss\" scoped>\n.card,\n.uploader {\n  margin-bottom: 20px;\n  width: 100%;\n  max-width: var(--width-x-large);\n}\n\n.uploader {\n  height: 190px;\n}\n\nbutton {\n  display: inline-block;\n  margin-left: 20px;\n  &:first-of-type {\n    margin-left: 0;\n  }\n}\n\n.body {\n  padding: 20px;\n}\n\n.search-input {\n  border-bottom: 2px solid var(--lightest-gray);\n  &::v-deep input {\n    border-radius: 0;\n    border: none;\n    padding-left: var(--page-padding);\n    height: var(--header-height);\n\n    &::placeholder {\n      color: var(--dark-gray);\n    }\n  }\n}\n\n.content {\n  &::v-deep .v-layout {\n    height: auto;\n    max-height: none;\n    overflow: hidden;\n  }\n}\n</style>\n","import mod from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./input.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./input.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./input.vue?vue&type=template&id=c551370e&scoped=true&\"\nimport script from \"./input.vue?vue&type=script&lang=js&\"\nexport * from \"./input.vue?vue&type=script&lang=js&\"\nimport style0 from \"./input.vue?vue&type=style&index=0&id=c551370e&lang=scss&scoped=true&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"c551370e\",\n  null\n  \n)\n\nexport default component.exports","export default function getIcon(type) {\n  if (type === \"application/pdf\") {\n    return \"picture_as_pdf\";\n  }\n\n  if (type.startsWith(\"application\")) {\n    return \"insert_drive_file\";\n  }\n\n  if (type.startsWith(\"image\")) {\n    return \"crop_original\";\n  }\n\n  if (type.startsWith(\"video\")) {\n    return \"videocam\";\n  }\n\n  if (type.startsWith(\"code\")) {\n    return \"code\";\n  }\n\n  if (type.startsWith(\"audio\")) {\n    return \"audiotrack\";\n  }\n\n  return \"save\";\n}\n"],"sourceRoot":""}