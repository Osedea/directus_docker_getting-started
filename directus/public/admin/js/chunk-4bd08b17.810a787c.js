(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-4bd08b17"],{"281c":function(e,t,i){"use strict";function n(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],i=t?1e3:1024;if(!1===Boolean(e))return"--";if(Math.abs(e)<i)return"".concat(e," B");var n=t?["kB","MB","GB","TB","PB","EB","ZB","YB"]:["KiB","MiB","GiB","TiB","PiB","EiB","ZiB","YiB"],r=-1,s=e;do{s/=i,r+=1}while(Math.abs(s)>=i&&r<n.length-1);return"".concat(s.toFixed(1)," ").concat(n[r])}i.d(t,"a",function(){return n})},"6ba7":function(e,t,i){"use strict";var n=i("ebbd"),r=i.n(n);r.a},"8db2":function(e,t){e.exports={props:{id:{type:String,required:!0},name:{type:String,required:!0},value:{type:null,default:null},type:{type:String,required:!0},length:{type:[String,Number],default:null},readonly:{type:Boolean,default:!1},collection:{type:String,default:null},required:{type:Boolean,default:!1},options:{type:Object,default:()=>({})},newItem:{type:Boolean,default:!1},relation:{type:Object,default:null},fields:{type:Object,default:null},values:{type:Object,default:null}}}},dea2:function(e,t,i){"use strict";i.r(t);var n=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"input-single-file"},[e.value?i("v-card",{staticClass:"card",attrs:{title:e.image.title,subtitle:e.subtitle+e.subtitleExtra,src:e.src,icon:e.icon,href:e.href,options:{deselect:{text:e.$t("deselect"),icon:"clear"},remove:{text:e.$t("delete"),icon:"delete"}},"big-image":""},on:{deselect:function(t){return e.$emit("input",null)},remove:e.removeFile}}):i("v-upload",{staticClass:"uploader",attrs:{small:"",disabled:e.readonly,accept:e.options.accept,multiple:!1},on:{upload:e.saveUpload}}),i("v-button",{attrs:{type:"button",disabled:e.readonly},on:{click:function(t){e.newFile=!0}}},[i("v-icon",{attrs:{name:"add"}}),e._v("\n    "+e._s(e.$t("new_file"))+"\n  ")],1),i("v-button",{attrs:{type:"button",disabled:e.readonly},on:{click:function(t){e.existing=!0}}},[i("v-icon",{attrs:{name:"playlist_add"}}),e._v("\n    "+e._s(e.$t("existing"))+"\n  ")],1),e.newFile?i("portal",{attrs:{to:"modal"}},[i("v-modal",{attrs:{title:e.$t("file_upload"),buttons:{done:{text:e.$t("done")}}},on:{close:function(t){e.newFile=!1}}},[i("div",{staticClass:"body"},[i("v-upload",{attrs:{accept:e.options.accept,multiple:!1},on:{upload:e.saveUpload}})],1)])],1):e._e(),e.existing?i("portal",{attrs:{to:"modal"}},[i("v-modal",{attrs:{title:e.$t("choose_one"),buttons:{done:{text:e.$t("done")}},"action-required":""},on:{close:function(t){e.existing=!1},done:function(t){e.existing=!1}}},[i("div",{staticClass:"content"},[i("div",{staticClass:"search"},[i("v-input",{staticClass:"search-input",attrs:{type:"search",placeholder:e.$t("search")},on:{input:e.onSearchInput}})],1),i("v-items",{staticClass:"items",attrs:{collection:"directus_files","view-type":e.viewType,selection:e.value?[e.value]:[],filters:e.filters,"view-query":e.viewQuery,"view-options":e.viewOptions},on:{options:e.setViewOptions,query:e.setViewQuery,select:e.saveSelection}})],1)])],1):e._e()],1)},r=[],s=(i("8e6e"),i("ac6a"),i("456d"),i("96cf"),i("3b8d")),a=i("75fc"),o=i("bd86"),l=(i("f559"),i("28a5"),i("8db2")),c=i.n(l),u=i("281c"),p=i("fe76");function d(e,t){var i=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),i.push.apply(i,n)}return i}function h(e){for(var t=1;t<arguments.length;t++){var i=null!=arguments[t]?arguments[t]:{};t%2?d(i,!0).forEach(function(t){Object(o["a"])(e,t,i[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(i)):d(i).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(i,t))})}return e}var f={mixins:[c.a],data:function(){return{newFile:!1,existing:!1,viewOptionsOverride:{},viewTypeOverride:null,viewQueryOverride:{},filtersOverride:[],image:_.cloneDeep(this.value)}},computed:{subtitle:function(){return this.image?this.image.filename.split(".").pop()+" • "+this.$d(new Date(this.image.uploaded_on),"short"):""},subtitleExtra:function(){return this.image.type&&this.image.type.startsWith("image")?" • "+this.image.width+" x "+this.image.height+" ("+Object(u["a"])(this.image.filesize)+")":null},src:function(){return this.image.type&&this.image.type.startsWith("image")?this.image.data.full_url:null},icon:function(){return this.image.type&&!this.image.type.startsWith("image")?Object(p["a"])(this.image.type):null},href:function(){return this.image.type&&"application/pdf"===this.image.type?this.image.data.full_url:null},viewOptions:function(){var e=this.options.viewOptions;return h({},e,{},this.viewOptionsOverride)},viewType:function(){return this.viewTypeOverride?this.viewTypeOverride:this.options.viewType},viewQuery:function(){var e=this.options.viewQuery;return h({},e,{},this.viewQueryOverride)},filters:function(){return[].concat(Object(a["a"])(this.options.filters),Object(a["a"])(this.fileTypeFilters),Object(a["a"])(this.filtersOverride))},fileTypeFilters:function(){return!this.options.accept||this.filtersOverride.length>0||this.options.filters.some(function(e){return"type"===e.field})?[]:[{field:"type",operator:"in",value:(this.options.accept||"").trim().split(/,\s*/)}]}},created:function(){var e=Object(s["a"])(regeneratorRuntime.mark(function e(){var t;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:if(!this.value||!this.value.id){e.next=10;break}return e.prev=1,e.next=4,this.$api.getItem("directus_files",this.value.id);case 4:t=e.sent,this.image=t.data,e.next=10;break;case 8:e.prev=8,e.t0=e["catch"](1);case 10:this.onSearchInput=_.debounce(this.onSearchInput,200);case 11:case"end":return e.stop()}},e,this,[[1,8]])}));function t(){return e.apply(this,arguments)}return t}(),methods:{saveUpload:function(e){this.image=e.data,this.$emit("input",{id:e.data.id}),this.newFile=!1},setViewOptions:function(e){this.viewOptionsOverride=h({},this.viewOptionsOverride,{},e)},setViewQuery:function(e){this.viewQueryOverride=h({},this.viewQueryOverride,{},e)},onSearchInput:function(e){this.setViewQuery({q:e})},saveSelection:function(e){var t=e[e.length-1];this.image=t,this.$emit("input",{id:t.id})},removeFile:function(){var e=Object(s["a"])(regeneratorRuntime.mark(function e(){var t;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return t=this.value,e.next=3,this.$api.deleteItem("directus_files",t.id);case 3:this.$notify({title:this.$t("item_deleted"),color:"green",iconMain:"check"}),this.image=null,this.$emit("input",null);case 6:case"end":return e.stop()}},e,this)}));function t(){return e.apply(this,arguments)}return t}()}},v=f,m=(i("6ba7"),i("2877")),y=Object(m["a"])(v,n,r,!1,null,"c551370e",null);t["default"]=y.exports},ebbd:function(e,t,i){},fe76:function(e,t,i){"use strict";i.d(t,"a",function(){return n});i("f559");function n(e){return"application/pdf"===e?"picture_as_pdf":e.startsWith("application")?"insert_drive_file":e.startsWith("image")?"crop_original":e.startsWith("video")?"videocam":e.startsWith("code")?"code":e.startsWith("audio")?"audiotrack":"save"}}}]);
//# sourceMappingURL=chunk-4bd08b17.810a787c.js.map